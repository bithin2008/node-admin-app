"use strict";var WebTour=function(){'use strict';function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o,s=0;s<t.length;s++)o=t[s],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}function o(e,o,s){return o&&t(e.prototype,o),s&&t(e,s),e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,s)}return o}function i(e){for(var t,o=1;o<arguments.length;o++)t=null==arguments[o]?{}:arguments[o],o%2?n(Object(t),!0).forEach(function(o){s(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))});return e}var l=function(){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=i({animate:!0,opacity:.5,offset:20,borderRadius:3,allowClose:!0,highlight:!0,highlightOffset:5,keyboard:!0,width:"300px",zIndex:10050,removeArrow:!1,onNext:function(){return null},onPrevious:function(){return null}},o),this.steps=[],this.stepIndex=0,this.isRunning=!1,this.isPaused=!1,this.window=window,this.document=document,this.onClick=this.onClick.bind(this),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.bind()}return o(t,[{key:"bind",value:function(){"ontouchstart"in this.document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1),this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1)}},{key:"onClick",value:function(t){t.stopPropagation(),t.target.classList.contains("wt-btn-next")&&(this.onNext(),this.next()),t.target.classList.contains("wt-btn-back")&&(this.onPrevious(),this.previous()),t.target.classList.contains("wt-overlay")&&this.options.allowClose&&this.stop()}},{key:"onKeyUp",value:function(e){return this.isRunning&&this.options.keyboard?27===e.keyCode&&this.options.allowClose?void this.stop():void(39===e.keyCode?(this.onNext(),this.next()):37===e.keyCode&&(this.onPrevious(),this.previous())):void 0}},{key:"onResize",value:function(){this.isRunning&&(this.clear(),this.render(this.steps[this.stepIndex]))}},{key:"setSteps",value:function(e){this.steps=null,this.steps=e}},{key:"getSteps",value:function(){return this.steps}},{key:"highlight",value:function(e){var e=this.document.querySelector(e);e&&this.createOverlay(e)}},{key:"start",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.isRunning=!0,this.stepIndex=e,this.render(this.steps[this.stepIndex])}},{key:"stop",value:function(){this.clear(),this.isRunning=!1}},{key:"showLoader",value:function(){var e=this.document.querySelector(".wt-popover"),t=this.document.createElement("div");t.classList.add("wt-loader"),t.style.zIndex=this.options.zIndex+10,e.prepend(t)}},{key:"moveNext",value:function(){this.isPaused=!1,this.next()}},{key:"movePrevious",value:function(){this.isPaused=!1,this.previous()}},{key:"onNext",value:function(){this.isPaused||this.steps[this.stepIndex]&&this.steps[this.stepIndex].onNext&&this.steps[this.stepIndex].onNext()}},{key:"onPrevious",value:function(){this.isPaused||this.steps[this.stepIndex]&&this.steps[this.stepIndex].onPrevious&&this.steps[this.stepIndex].onPrevious()}},{key:"next",value:function(){if(!this.isPaused)return this.stepIndex++,this.clear(),0!==this.steps.length&&(this.stepIndex>=this.steps.length?void this.stop():void this.render(this.steps[this.stepIndex]))}},{key:"previous",value:function(){if(!this.isPaused)return this.stepIndex--,this.clear(),0!==this.steps.length&&(0>this.stepIndex?void this.stop():void this.render(this.steps[this.stepIndex]))}},{key:"render",value:function(e){var t=e.element?this.document.querySelector(e.element):null;if(t){t.style.position=t.style.position?t.style.position:"";var o=!e.highlight||e.highlight;this.options.highlight&&o&&t.setAttribute("wt-highlight","true")}var s=this.document.createElement("div"),n=this.document.createElement("div"),i=this.document.createElement("div"),l=this.document.createElement("div"),d=this.document.createElement("div"),r=this.document.createElement("button"),p=this.document.createElement("button");if(s.classList.add("wt-popover"),s.style.borderRadius=this.options.borderRadius+"px",s.style.zIndex=this.options.zIndex+10,this.options.width&&("string"==typeof this.options.width?s.style.width=this.options.width:0<this.options.width&&(s.style.width=this.options.width+"px")),e.width&&("string"==typeof e.width?s.style.width=e.width:0<e.width&&(s.style.width=e.width+"px")),n.classList.add("wt-popover-inner"),i.classList.add("wt-arrow"),i.setAttribute("data-popper-arrow","true"),l.classList.add("wt-title"),d.classList.add("wt-content"),r.classList.add("wt-btns","wt-btn-next"),p.classList.add("wt-btns","wt-btn-back"),e.placement&&s.classList.add(e.placement),e.title&&(l.innerText=e.title),d.innerHTML=e.content?e.content:"",r.innerHTML=e.btnNext&&e.btnNext.text?e.btnNext.text:this.stepIndex==this.steps.length-1?"Done":"Next &#8594;",p.innerHTML=e.btnBack&&e.btnBack.text?e.btnBack.text:0==this.stepIndex?"Skip Tour":"\t&#8592; Back",r.style.backgroundColor=e.btnNext&&e.btnNext.backgroundColor?e.btnNext.backgroundColor:"#000000",p.style.backgroundColor=e.btnBack&&e.btnBack.backgroundColor?e.btnBack.backgroundColor:"#efefef;",r.style.color=e.btnNext&&e.btnNext.textColor?e.btnNext.textColor:"#fff",p.style.color=e.btnBack&&e.btnBack.textColor?e.btnBack.textColor:"#555",e.title&&n.append(l),n.append(d),n.append(r),n.append(p),s.append(i),s.append(n),this.document.body.appendChild(s),t)this.positionPopover(t,s,i,e),this.options.highlight&&this.createOverlay(t);else{if(s.classList.add("wt-slides"),s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),this.options.highlight){var a=document.createElement("div");a.classList.add("wt-overlay","open"),a.style.zIndex=this.options.zIndex-10,a.style.position="fixed",a.style.top=0,a.style.left=0,a.style.right=0,a.style.bottom=0,this.document.body.appendChild(a)}i.remove()}this.options.removeArrow&&i.remove()}},{key:"clear",value:function(){var e=this.document.querySelector(".wt-popover"),t=this.document.querySelector(".wt-loader");e&&e.remove(),t&&t.remove(),this.document.querySelectorAll(".wt-overlay").forEach(function(e){e.remove()}),this.document.querySelectorAll("*[wt-highlight]").forEach(function(e){e.removeAttribute("wt-highlight")})}},{key:"getWindowOffset",value:function(){return{height:this.window.innerHeight-(this.window.innerHeight-this.document.documentElement.clientHeight),width:this.window.innerWidth-(this.window.innerWidth-this.document.documentElement.clientWidth)}}},{key:"getOffset",value:function(e){for(var t=0,o=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,o+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:o,left:t}}},{key:"getTranslateXY",value:function(e){var t=Math.abs,o=window.getComputedStyle(e),s=new DOMMatrixReadOnly(o.transform);return{translateX:t(e.offsetWidth*(s.m41/100)),translateY:t(e.offsetHeight*(s.m42/100))}}},{key:"getElementPosition",value:function(e){return{top:this.getOffset(e).top-(e.style.transform?this.getTranslateXY(e).translateY:0),left:this.getOffset(e).left-(e.style.transform?this.getTranslateXY(e).translateX:0)}}},{key:"positionPopover",value:function(e,t,o,s){var n=s.placement?s.placement:"auto",i=s.strategy?s.strategy:"absolute";t.style.position=i,o.style.position="absolute";var l,d;if(l=this.getElementPosition(e).top,d=this.getElementPosition(e).left,"auto"==n||"auto-start"==n||"auto-end"==n){var r=n.replace("auto","").trim(),p="";l+(t.offsetHeight+this.options.offset)>this.window.innerHeight-100&&(d<this.window.innerWidth/3?p=0<r.length?r:"-start":d>this.window.innerWidth-this.window.innerWidth/3&&(p=0<r.length?r:"-end"),n="top"+p),d+e.offsetWidth+t.offsetWidth>this.window.innerWidth&&(l<this.window.innerHeight/3?p=0<r.length?r:"-start":l>this.window.innerHeight-this.window.innerHeight/3&&(p=0<r.length?r:"-start"),n="left"+p),d<t.offsetWidth&&e.offsetWidth+t.offsetWidth<this.window.innerWidth&&(l<this.window.innerHeight/3?p=0<r.length?r:"-start":l>this.window.innerHeight-this.window.innerHeight/3&&(p=0<r.length?r:"-start"),n="right"+p),(l<t.offsetHeight+this.options.offset||100>l)&&(d<this.window.innerWidth/3?p=0<r.length?r:"-start":d>this.window.innerWidth-this.window.innerWidth/3&&(p=0<r.length?r:"-end"),n="bottom"+p),t.classList.add(n)}"top"==n?(t.style.top=l-(t.offsetHeight+this.options.offset)+"px",t.style.left=d+(e.offsetWidth/2-t.offsetWidth/2)+"px"):"top-start"==n?(t.style.top=l-(t.offsetHeight+this.options.offset)+"px",t.style.left=d-this.options.highlightOffset+"px"):"top-end"==n?(t.style.top=l-(t.offsetHeight+this.options.offset)+"px",t.style.left=d+e.offsetWidth+this.options.highlightOffset-t.offsetWidth+"px"):"bottom"==n?(t.style.top=l+e.offsetHeight+this.options.offset+"px",t.style.left=d+e.offsetWidth/2-t.offsetWidth/2+"px"):"bottom-start"==n?(t.style.top=l+e.offsetHeight+this.options.offset+"px",t.style.left=d-this.options.highlightOffset+"px"):"bottom-end"==n?(t.style.top=l+e.offsetHeight+this.options.offset+"px",t.style.left=d+e.offsetWidth+this.options.highlightOffset-t.offsetWidth+"px"):"right"==n?(t.style.top=l+t.offsetHeight/2-(e.offsetHeight+this.options.highlightOffset)/2+"px",t.style.left=d+(e.offsetWidth+this.options.offset)+"px"):"right-start"==n?(t.style.top=l-this.options.highlightOffset+"px",t.style.left=d+(e.offsetWidth+this.options.offset)+"px"):"right-end"==n?(t.style.top=l+e.offsetHeight-t.offsetHeight+this.options.highlightOffset+"px",t.style.left=d+(e.offsetWidth+this.options.offset)+"px"):"left"==n?(t.style.top=l+t.offsetHeight/2-(e.offsetHeight+this.options.highlightOffset)/2+"px",t.style.left=d-(t.offsetWidth+this.options.offset)+"px"):"left-start"==n?(t.style.top=l-this.options.highlightOffset+"px",t.style.left=d-(t.offsetWidth+this.options.offset)+"px"):"left-end"==n&&(t.style.top=l+e.offsetHeight-t.offsetHeight+this.options.highlightOffset+"px",t.style.left=d-(t.offsetWidth+this.options.offset)+"px"),"fixed"===i?this.window.scrollTo(0,0):t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},{key:"createOverlay",value:function(e){var t=document.createElement("div");t.classList.add("wt-overlay","open","overlay1"),t.style.zIndex=this.options.zIndex-10;var o=document.createElement("div");o.classList.add("wt-overlay","open","overlay2"),o.style.zIndex=this.options.zIndex-10;var s=document.createElement("div");s.classList.add("wt-overlay","open","overlay3"),s.style.zIndex=this.options.zIndex-10;var n=document.createElement("div");n.classList.add("wt-overlay","open","overlay4"),n.style.zIndex=this.options.zIndex-10,this.document.body.appendChild(t),this.document.body.appendChild(o),this.document.body.appendChild(s),this.document.body.appendChild(n);var i,l;i=this.getElementPosition(e).top,l=this.getElementPosition(e).left;var d=this.options.highlightOffset;t.style.position="absolute",t.style.top=0,t.style.width=l-d+"px",t.style.height=i+e.offsetHeight+d+"px",t.style.left=0,o.style.position="absolute",o.style.top=0,o.style.right=0,o.style.height=i-d+"px",o.style.left=l-d+"px",s.style.position="absolute",s.style.top=i-d+"px",s.style.right=0,s.style.bottom=0-(this.document.body.offsetHeight-this.window.innerHeight)+"px",s.style.left=l+e.offsetWidth+d+"px",n.style.position="absolute",n.style.top=i+e.offsetHeight+d+"px",n.style.width=l+e.offsetWidth+d+"px",n.style.bottom=0-(this.document.body.offsetHeight-this.window.innerHeight)+"px",n.style.left=0}}]),t}();return l}();
